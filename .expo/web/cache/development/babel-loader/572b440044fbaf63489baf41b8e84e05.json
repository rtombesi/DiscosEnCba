{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Proyecto discos-cba\\\\app\\\\components\\\\account\\\\LoginFacebook.js\";\nimport React, { useState } from \"react\";\nimport { SocialIcon } from \"react-native-elements\";\nimport * as firebase from \"firebase\";\nimport * as Facebook from \"expo-facebook\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { FacebookApi } from \"../../utils/social\";\nimport Loading from \"../Loading\";\nexport default function LoginFacebook(props) {\n  var toastRef = props.toastRef;\n  var navigation = useNavigation();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setloading = _useState2[1];\n\n  var login = function login() {\n    var _await$Facebook$logIn, type, token, credentials;\n\n    return _regeneratorRuntime.async(function login$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(Facebook.initializeAsync(FacebookApi.application_id));\n\n          case 2:\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(Facebook.logInWithReadPermissionsAsync({\n              permissions: FacebookApi.permissions\n            }));\n\n          case 4:\n            _await$Facebook$logIn = _context.sent;\n            type = _await$Facebook$logIn.type;\n            token = _await$Facebook$logIn.token;\n\n            if (type === \"success\") {\n              setloading(true);\n              credentials = firebase.auth.FacebookAuthProvider.credential(token);\n              firebase.auth().signInWithCredential(credentials).then(function () {\n                setloading(false);\n                navigation.navigate(\"account\");\n              }).catch(function () {\n                setloading(false);\n                toastRef.current.show(\"Credenciales incorrectas\");\n              });\n            } else if (type === \"cancel\") {\n              toastRef.current.show(\"Inicio de sesión cancelado\");\n            } else {\n              toastRef.current.show(\"Error, intentelo más tarde\");\n            }\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(SocialIcon, {\n    title: \"Iniciar con Facebook\",\n    button: true,\n    type: \"facebook\",\n    onPress: login,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }), React.createElement(Loading, {\n    isVisible: loading,\n    text: \"Iniciando sesi\\xF3n...\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["D:/Proyecto discos-cba/app/components/account/LoginFacebook.js"],"names":["React","useState","SocialIcon","firebase","Facebook","useNavigation","FacebookApi","Loading","LoginFacebook","props","toastRef","navigation","loading","setloading","login","initializeAsync","application_id","logInWithReadPermissionsAsync","permissions","type","token","credentials","auth","FacebookAuthProvider","credential","signInWithCredential","then","navigate","catch","current","show"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,UAAT,QAA2B,uBAA3B;AACA,OAAO,KAAKC,QAAZ,MAA0B,UAA1B;AACA,OAAO,KAAKC,QAAZ,MAA0B,eAA1B;AACA,SAASC,aAAT,QAA8B,0BAA9B;AACA,SAASC,WAAT;AACA,OAAOC,OAAP;AAEA,eAAe,SAASC,aAAT,CAAuBC,KAAvB,EAA8B;AAAA,MACnCC,QADmC,GACtBD,KADsB,CACnCC,QADmC;AAE3C,MAAMC,UAAU,GAAGN,aAAa,EAAhC;;AAF2C,kBAGbJ,QAAQ,CAAC,KAAD,CAHK;AAAA;AAAA,MAGpCW,OAHoC;AAAA,MAG3BC,UAH2B;;AAK3C,MAAMC,KAAK,GAAG,SAARA,KAAQ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACNV,QAAQ,CAACW,eAAT,CAAyBT,WAAW,CAACU,cAArC,CADM;;AAAA;AAAA;AAAA,6CAGkBZ,QAAQ,CAACa,6BAAT,CAAuC;AACnEC,cAAAA,WAAW,EAAEZ,WAAW,CAACY;AAD0C,aAAvC,CAHlB;;AAAA;AAAA;AAGJC,YAAAA,IAHI,yBAGJA,IAHI;AAGEC,YAAAA,KAHF,yBAGEA,KAHF;;AAOZ,gBAAID,IAAI,KAAK,SAAb,EAAwB;AACtBN,cAAAA,UAAU,CAAC,IAAD,CAAV;AACMQ,cAAAA,WAFgB,GAEFlB,QAAQ,CAACmB,IAAT,CAAcC,oBAAd,CAAmCC,UAAnC,CAA8CJ,KAA9C,CAFE;AAGtBjB,cAAAA,QAAQ,CACLmB,IADH,GAEGG,oBAFH,CAEwBJ,WAFxB,EAGGK,IAHH,CAGQ,YAAM;AACVb,gBAAAA,UAAU,CAAC,KAAD,CAAV;AACAF,gBAAAA,UAAU,CAACgB,QAAX,CAAoB,SAApB;AACD,eANH,EAOGC,KAPH,CAOS,YAAM;AACXf,gBAAAA,UAAU,CAAC,KAAD,CAAV;AACAH,gBAAAA,QAAQ,CAACmB,OAAT,CAAiBC,IAAjB,CAAsB,0BAAtB;AACD,eAVH;AAWD,aAdD,MAcO,IAAIX,IAAI,KAAK,QAAb,EAAuB;AAC5BT,cAAAA,QAAQ,CAACmB,OAAT,CAAiBC,IAAjB,CAAsB,4BAAtB;AACD,aAFM,MAEA;AACLpB,cAAAA,QAAQ,CAACmB,OAAT,CAAiBC,IAAjB,CAAsB,4BAAtB;AACD;;AAzBW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAd;;AA4BA,SACE,0CACE,oBAAC,UAAD;AACE,IAAA,KAAK,EAAC,sBADR;AAEE,IAAA,MAAM,MAFR;AAGE,IAAA,IAAI,EAAC,UAHP;AAIE,IAAA,OAAO,EAAEhB,KAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAOE,oBAAC,OAAD;AAAS,IAAA,SAAS,EAAEF,OAApB;AAA6B,IAAA,IAAI,EAAC,wBAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPF,CADF;AAWD","sourcesContent":["import React, { useState } from \"react\";\r\nimport { SocialIcon } from \"react-native-elements\";\r\nimport * as firebase from \"firebase\";\r\nimport * as Facebook from \"expo-facebook\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { FacebookApi } from \"../../utils/social\";\r\nimport Loading from \"../Loading\";\r\n\r\nexport default function LoginFacebook(props) {\r\n  const { toastRef } = props;\r\n  const navigation = useNavigation();\r\n  const [loading, setloading] = useState(false);\r\n\r\n  const login = async () => {\r\n    await Facebook.initializeAsync(FacebookApi.application_id);\r\n\r\n    const { type, token } = await Facebook.logInWithReadPermissionsAsync({\r\n      permissions: FacebookApi.permissions,\r\n    });\r\n\r\n    if (type === \"success\") {\r\n      setloading(true);\r\n      const credentials = firebase.auth.FacebookAuthProvider.credential(token);\r\n      firebase\r\n        .auth()\r\n        .signInWithCredential(credentials)\r\n        .then(() => {\r\n          setloading(false);\r\n          navigation.navigate(\"account\");\r\n        })\r\n        .catch(() => {\r\n          setloading(false);\r\n          toastRef.current.show(\"Credenciales incorrectas\");\r\n        });\r\n    } else if (type === \"cancel\") {\r\n      toastRef.current.show(\"Inicio de sesión cancelado\");\r\n    } else {\r\n      toastRef.current.show(\"Error, intentelo más tarde\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <SocialIcon\r\n        title=\"Iniciar con Facebook\"\r\n        button\r\n        type=\"facebook\"\r\n        onPress={login}\r\n      />\r\n      <Loading isVisible={loading} text=\"Iniciando sesión...\" />\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}