{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Proyecto discos-cba\\\\app\\\\screens\\\\Baratas\\\\AddReviewBarata.js\";\nimport React, { useState, useRef } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { AirbnbRating, Button, Input } from \"react-native-elements\";\nimport { KeyboardAwareScrollView } from \"react-native-keyboard-aware-scroll-view\";\nimport Toast from \"react-native-easy-toast\";\nimport Loading from \"../../components/Loading\";\nimport { firebaseApp } from \"../../utils/firebase\";\nimport firebase from \"firebase/app\";\nimport \"firebase/firestore\";\nvar db = firebase.firestore(firebaseApp);\nexport default function AddReviewBarata(props) {\n  var navigation = props.navigation,\n      route = props.route;\n  var idBarata = route.params.idBarata;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      rating = _useState2[0],\n      setRating = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      review = _useState4[0],\n      setReview = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      title = _useState6[0],\n      setTitle = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isLoading = _useState8[0],\n      setIsLoading = _useState8[1];\n\n  var toastRef = useRef();\n\n  var addReview = function addReview() {\n    if (!rating) {\n      toastRef.current.show(\"Por favor dar una puntuacion\");\n    } else if (!title) {\n      toastRef.current.show(\"Por favor indica el Titulo del Cd\");\n    } else if (!review) {\n      toastRef.current.show(\"Por favor indica un comentario\");\n    } else {\n      setIsLoading(true);\n      var user = firebase.auth().currentUser;\n      var payload = {\n        idUser: user.uid,\n        avatarUser: user.photoURL,\n        idCd: idBarata,\n        title: title,\n        review: review,\n        rating: rating,\n        createAt: new Date()\n      };\n      db.collection(\"reviewsbarata\").add(payload).then(function () {\n        updatebarata();\n      }).catch(function () {\n        toastRef.current.show(\"Ocurrió un error al enviar los datos\");\n        setIsLoading(false);\n      });\n    }\n  };\n\n  var updatebarata = function updatebarata() {\n    var barataRef = db.collection(\"baratas\").doc(idBarata);\n    barataRef.get().then(function (response) {\n      var barataData = response.data();\n      var ratingTotal = barataData.ratingTotal + rating;\n      var quantityVoting = barataData.quantityVoting + 1;\n      var ratingResult = ratingTotal / quantityVoting;\n      barataRef.update({\n        rating: ratingResult,\n        ratingTotal: ratingTotal,\n        quantityVoting: quantityVoting\n      }).then(function () {\n        setIsLoading(false);\n        navigation.goBack();\n      });\n    });\n  };\n\n  return React.createElement(View, {\n    style: styles.viewBody,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: styles.viewRating,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, React.createElement(AirbnbRating, {\n    count: 5,\n    reviews: [\"No me Gusta\", \"Algo me gusta\", \"Zafa\", \"Está muy Bueno\", \"Excelente\"],\n    defaultRating: 0,\n    size: 25,\n    onFinishRating: function onFinishRating(value) {\n      setRating(value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  })), React.createElement(KeyboardAwareScrollView, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.formReview,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, React.createElement(Input, {\n    placeholder: \"Titulo del Comentario\",\n    containerStyle: styles.input,\n    onChange: function onChange(e) {\n      return setTitle(e.nativeEvent.text);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }), React.createElement(Input, {\n    placeholder: \"Comentarios...\",\n    multiline: true,\n    inputContainerStyle: styles.textArea,\n    onChange: function onChange(e) {\n      return setReview(e.nativeEvent.text);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }), React.createElement(Button, {\n    title: \"Enviar Comentario\",\n    containerStyle: styles.btnContainer,\n    buttonStyle: styles.btn,\n    onPress: addReview,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }))), React.createElement(Toast, {\n    ref: toastRef,\n    position: \"center\",\n    opacity: 0.9,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }), React.createElement(Loading, {\n    isVisible: isLoading,\n    text: \"Enviando Comentario\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }));\n}\nvar styles = StyleSheet.create({\n  viewBody: {\n    flex: 1\n  },\n  viewRating: {\n    height: 110,\n    backgroundColor: \"#f2f2f2\"\n  },\n  formReview: {\n    flex: 1,\n    alignItems: \"center\",\n    margin: 10,\n    marginTop: 40\n  },\n  input: {\n    marginBottom: 12\n  },\n  textArea: {\n    height: 100,\n    width: \"100%\",\n    padding: 0,\n    margin: 0\n  },\n  btnContainer: {\n    flex: 1,\n    justifyContent: \"flex-end\",\n    marginTop: 20,\n    marginBottom: 10,\n    width: \"95%\"\n  },\n  btn: {\n    backgroundColor: \"#ea4d14fa\"\n  }\n});","map":{"version":3,"sources":["D:/Proyecto discos-cba/app/screens/Baratas/AddReviewBarata.js"],"names":["React","useState","useRef","AirbnbRating","Button","Input","KeyboardAwareScrollView","Toast","Loading","firebaseApp","firebase","db","firestore","AddReviewBarata","props","navigation","route","idBarata","params","rating","setRating","review","setReview","title","setTitle","isLoading","setIsLoading","toastRef","addReview","current","show","user","auth","currentUser","payload","idUser","uid","avatarUser","photoURL","idCd","createAt","Date","collection","add","then","updatebarata","catch","barataRef","doc","get","response","barataData","data","ratingTotal","quantityVoting","ratingResult","update","goBack","styles","viewBody","viewRating","value","formReview","input","e","nativeEvent","text","textArea","btnContainer","btn","StyleSheet","create","flex","height","backgroundColor","alignItems","margin","marginTop","marginBottom","width","padding","justifyContent"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from \"react\";\r\nimport { StyleSheet, View } from \"react-native\";\r\nimport { AirbnbRating, Button, Input } from \"react-native-elements\";\r\nimport { KeyboardAwareScrollView } from \"react-native-keyboard-aware-scroll-view\";\r\nimport Toast from \"react-native-easy-toast\";\r\nimport Loading from \"../../components/Loading\";\r\n\r\nimport { firebaseApp } from \"../../utils/firebase\";\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/firestore\";\r\n\r\nconst db = firebase.firestore(firebaseApp);\r\n\r\nexport default function AddReviewBarata(props) {\r\n  const { navigation, route } = props;\r\n  const { idBarata } = route.params;\r\n  const [rating, setRating] = useState(null);\r\n  const [review, setReview] = useState(\"\");\r\n  const [title, setTitle] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const toastRef = useRef();\r\n\r\n  const addReview = () => {\r\n    if (!rating) {\r\n      toastRef.current.show(\"Por favor dar una puntuacion\");\r\n    } else if (!title) {\r\n      toastRef.current.show(\"Por favor indica el Titulo del Cd\");\r\n    } else if (!review) {\r\n      toastRef.current.show(\"Por favor indica un comentario\");\r\n    } else {\r\n      setIsLoading(true);\r\n      const user = firebase.auth().currentUser;\r\n      const payload = {\r\n        idUser: user.uid,\r\n        avatarUser: user.photoURL,\r\n        idCd: idBarata,\r\n        title: title,\r\n        review: review,\r\n        rating: rating,\r\n        createAt: new Date(),\r\n      };\r\n      db.collection(\"reviewsbarata\")\r\n        .add(payload)\r\n        .then(() => {\r\n          updatebarata();\r\n        })\r\n        .catch(() => {\r\n          toastRef.current.show(\"Ocurrió un error al enviar los datos\");\r\n          setIsLoading(false);\r\n        });\r\n    }\r\n  };\r\n\r\n  const updatebarata = () => {\r\n    const barataRef = db.collection(\"baratas\").doc(idBarata);\r\n\r\n    barataRef.get().then((response) => {\r\n      const barataData = response.data();\r\n      const ratingTotal = barataData.ratingTotal + rating;\r\n      const quantityVoting = barataData.quantityVoting + 1;\r\n      const ratingResult = ratingTotal / quantityVoting;\r\n\r\n      barataRef\r\n        .update({\r\n          rating: ratingResult,\r\n          ratingTotal,\r\n          quantityVoting,\r\n        })\r\n        .then(() => {\r\n          setIsLoading(false);\r\n          navigation.goBack();\r\n        });\r\n    });\r\n  };\r\n\r\n  return (\r\n    <View style={styles.viewBody}>\r\n      <View style={styles.viewRating}>\r\n        <AirbnbRating\r\n          count={5}\r\n          reviews={[\r\n            \"No me Gusta\",\r\n            \"Algo me gusta\",\r\n            \"Zafa\",\r\n            \"Está muy Bueno\",\r\n            \"Excelente\",\r\n          ]}\r\n          defaultRating={0}\r\n          size={25}\r\n          onFinishRating={(value) => {\r\n            setRating(value);\r\n          }}\r\n        />\r\n      </View>\r\n      <KeyboardAwareScrollView>\r\n        <View style={styles.formReview}>\r\n          <Input\r\n            placeholder=\"Titulo del Comentario\"\r\n            containerStyle={styles.input}\r\n            onChange={(e) => setTitle(e.nativeEvent.text)}\r\n          />\r\n          <Input\r\n            placeholder=\"Comentarios...\"\r\n            multiline={true}\r\n            inputContainerStyle={styles.textArea}\r\n            onChange={(e) => setReview(e.nativeEvent.text)}\r\n          />\r\n          <Button\r\n            title=\"Enviar Comentario\"\r\n            containerStyle={styles.btnContainer}\r\n            buttonStyle={styles.btn}\r\n            onPress={addReview}\r\n          />\r\n        </View>\r\n      </KeyboardAwareScrollView>\r\n      <Toast ref={toastRef} position=\"center\" opacity={0.9} />\r\n      <Loading isVisible={isLoading} text=\"Enviando Comentario\" />\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  viewBody: {\r\n    flex: 1,\r\n  },\r\n  viewRating: {\r\n    height: 110,\r\n    backgroundColor: \"#f2f2f2\",\r\n  },\r\n  formReview: {\r\n    flex: 1,\r\n    alignItems: \"center\",\r\n    margin: 10,\r\n    marginTop: 40,\r\n  },\r\n  input: {\r\n    marginBottom: 12,\r\n  },\r\n  textArea: {\r\n    height: 100,\r\n    width: \"100%\",\r\n    padding: 0,\r\n    margin: 0,\r\n  },\r\n  btnContainer: {\r\n    flex: 1,\r\n    justifyContent: \"flex-end\",\r\n    marginTop: 20,\r\n    marginBottom: 10,\r\n    width: \"95%\",\r\n  },\r\n  btn: {\r\n    backgroundColor: \"#ea4d14fa\",\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}